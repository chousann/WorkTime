name: debugger-action
on:
  push:
    branches:
      - debugger-action
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Debug session12
        uses: chousann/debugger-action@master
      - name: Run a multi-line script
        run: |
          unset TMUX
          tmux attach
          tmate -S /tmp/tmate.sock display -p '#{tmate_ssh}'
          MSG=$(tmate -S /tmp/tmate.sock display -p '#{tmate_ssh}')
          timeout=$((15*60))
          while [ -S /tmp/tmate.sock ]; do
            sleep 1
            timeout=$(($timeout-1))
            if (( $timeout%30 == 0 )); then
              echo $MSG
            fi
          done
